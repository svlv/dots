#!/bin/sh

# Prints information about internet connection:
# Ethernet: ğŸŒ (up) or â(down)
# Wifi: ğŸ“¶ and strength (up) or ğŸ“¡ (down)
# Tunnel: ğŸ”’ (up) or ğŸ”“ (down)

get_wifi_level() {
  level=$(awk '/^\s*w/ {
    if ($4 >= -50)
      print "100%";
    else if ($4 <= -100)
      print "0%";
    else
      print int(2 * ($4 + 100))
    }' /proc/net/wireless)
  printf %d\\n "$level"
}

tunnel() {
  case "$(cat /sys/class/net/tun*/operstate 2>/dev/null)" in
    up) printf "ğŸ”’" ;;
    *) printf "ğŸ”“" ;;
  esac
}

wifi() {
  case "$(cat /sys/class/net/w*/operstate 2>/dev/null)" in
    down) printf ğŸ“¡ ;;
      up) printf "ğŸ“¶ %3d%%" "$(get_wifi_level)" ;;
  esac
}

ethernet() {
  case "$(cat /sys/class/net/e*/operstate 2>/dev/null)" in
    down) printf "â" ;;
      up) printf "ğŸŒ"  ;;
  esac
}

printf "%s %s %s\n" "$(ethernet)" "$(wifi)" "$(tunnel)"

